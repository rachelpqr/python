#接口测试入门学习

##1. 要有接口测试思维  
业务测试的思维和接口测试的技术结合到一起，合成接口测试的思维。运用这种思维掌握工具使用，代码编写，打造测试框架，以及用例设计等完成接口测试。
##2. 初级技能掌握

### 2.1 接口测试是做什么？

1. 接口测试是通过设计输入和预期输出来完成测试验证的
2. 正常流程：正确接受合法 Request 入参，正确拒绝非法 Request 入参
2. 接口测试是一个技术知识和业务知识相结合的工作
3. 接口测试也是功能测试，只不过交互的是测试工具或者代码

### 2.2 如何快速了解接口信息

1. 理想情况下，通过接口文档来了解接口信息：Word文档、Swagger 
2. 借助工具辅助:Fiddler<——>分析问题（接口信息表）<——>询问沟通——>得到完整的接口文档
3. 多个接口串行分析：制作一个流程中所有接口的接口信息表，整理每一个流程的数据流程，数据流程驱动了业务流处理

**Fiddler中要重点关注的属性:**

HOST，它表示指定访问的服务器域名；
Connection 的值为 keep-alive，这表示需要持久连接；
Accept，它表示客户端可以接受的内容类型为 application/json, text/plain, / ；
User-Agent，它说明请求是从什么浏览器发出去的；
Sec-Fetch-Site 和 Sec-Fetch-Mode，它们是 JS 中对跨域的一些设置；
Accept-Encoding 设置为 gzip、deflate、br，这表示可以支持的 Web 服务器返回内容压缩编码类型；
Accept-Language，它表示接受的语言；Cookie内容是完成接口测试必须要模拟并传递的一些信息。

**针对Cookies的参数询问解惑：**

1. 参数的含义以及来源：每一个参数的中文语义，这个参数的赋值是从哪里来的，要知道如何构造它
2. 参数的作用域：这个参数在这个接口中是做什么用的，验证算法是什么，
3. 返回值的含义：在返回值中每一个 JSON 的 Key 所对应的含义，

### 2.3 理解接口测试的逻辑

接口测试的思维：先从单个接口的测试开始，保障单个接口的正确性和健壮性，然后通过单个接口的测试完成多个接口的业务逻辑串联，站在业务逻辑的角度完成业务逻辑的正确性检测。

接口测试和持续集成结合：持续集成平台 Jenkins 和 Newman 运行 Postman 脚本

## 3. 综合技能掌握

### 3.1 流程化的测试脚本抽象为框架 ###

**为什么要开发测试框架**

1. 工具导出来的代码很难看懂
2. 工具支持的接口协议有限，接口类型多样变化，被测项目增加，接口类型增加，无法高效展开接口测试

**搭建测试框架不要纠结于技术选型**

使用自己或团队熟悉的技术栈

**搭建前的准备工作**

1. 安装Python 的第三方 HTTP 协议支持库 requests：```pip install requests```
2. 编写单接口测试脚本

**打造一个测试框架**

1. 建立一个叫做 common.py 的公共的方法类，完成 HTTP 协议的 GET 请求或 POST 请求的验证，并且和业务无关
2. 用这个 Common 类，修改单接口测试脚本

**用测试框架完成多接口测试**

1. 编写多接口测试脚本
2. 改造 Common 类的构造函数，使其变成一个通用类
3. 改写脚本


**Common类与驱动框架结合构成完美的测试框架**

### 3.2 如何支持RESTful风格的接口 ###

**借助外力**

在代码中引用外部支持库，比如 Python的JSON 库

**自己封装**

借助开源库解决数据转换，在 Common 类中加入 Delete 和 Put 方法的支持，即封装 HTTP 协议对应的 Method 方法

### 3.3 接口测试平台中的工具和框架能否兼容 ###

**工具的便捷性与框架的灵活性可兼得**

1. 利用Postman 界面化的优势，可快速完成大量的脚本撰写工作
2. 用框架完成测试脚本的执行，代码存储到代码仓，便于版本控制
3. 为持续集成、持续交付等平台提供无人值守的、按需驱动测试的途径
4. 提升团队的工作效率

**如何建立一个自己的测试平台**

1. 借助 Postman 工具快速创建测试脚本
2. 将代码导出成流程化的测试代码
3. 通过测试框架，改写导出的脚本
4. 测试脚本存入代码仓中为持续集成平台提供持续验证

## 4. 进阶技能掌握 ##

### 4.1 如何测试陌生的协议接口 ###

1. 拿到并了解开发工程师写的客户端代码
2. 借助熟悉的工具辅助分析我们的被测接口
3. 通过编写代码解决
4. 将接口封装到自己的测试框架中

### 4.2 封装测试数据 ###

1. 选取测试数据，定义参数的存储格式：Excel，考虑参数类的扩展性
2. 通过统一抽象，建立一个公共处理数据的方式

### 4.3 解决微服务接口之间混乱的调用关系 ###

![](https://static001.geekbang.org/resource/image/9c/28/9c1e3f58863468fe261553c2dfbe5628.jpg)

**选择 Mock 服务框架完成依赖服务B的替身**

1. 开发能力强可选择对应语言的 Mock 框架： Java 语言的Mockito 框架和 Python 语言的mock 框架
2. 开发能力弱可选择moco:[https://github.com/dreamhead/moco](https://github.com/dreamhead/moco)

**Mock服务设计要点**

1. 设计简单
2. 处理速度快
3. 轻量化启动，易销毁

## 5. 如何成长为高级测试工程师 ##

1. 从实际动手开始学习测试技术：从一个实际例子出发开始学习，直击问题
2. 不断遇见问题&解决问题：在学习和工作中，遇到问题要一个一个去解决，从问题中总结可复用的经验
3. 掌握理论知识：先实践再学习理论
